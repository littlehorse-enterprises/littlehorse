---
title: wf_run.proto
hide_title: true
---

import { ProtoMessage, ProtoServiceMethod, ProtoEnum } from '@theme/ProtoFile';

# `wf_run.proto`
_**path** wf_run.proto_

_**package** littlehorse_



---

## Messages


### `FailureBeingHandled`
<ProtoMessage key={0} message={{"name":"FailureBeingHandled","longName":"FailureBeingHandled","fullName":"littlehorse.FailureBeingHandled","description":"Points to the Failure that is currently being handled in the ThreadRun.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"thread_run_number","description":"The thread run number.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"node_run_position","description":"The position of the NodeRun causing the failure.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"failure_number","description":"The number of the failure.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `HandlingFailureHaltReason`
<ProtoMessage key={1} message={{"name":"HandlingFailureHaltReason","longName":"HandlingFailureHaltReason","fullName":"littlehorse.HandlingFailureHaltReason","description":"A Halt Reason denoting that a ThreadRun is halted while a Failure Handler is being run.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"handler_thread_id","description":"The ID of the Failure Handler ThreadRun.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `Interrupted`
<ProtoMessage key={2} message={{"name":"Interrupted","longName":"Interrupted","fullName":"littlehorse.Interrupted","description":"A Halt Reason denoting that a ThreadRun is halted because it is waiting for the\ninterrupt handler threadRun to run.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"interrupt_thread_id","description":"The ID of the Interrupt Handler ThreadRun.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `ManualHalt`
<ProtoMessage key={3} message={{"name":"ManualHalt","longName":"ManualHalt","fullName":"littlehorse.ManualHalt","description":"A Halt Reason denoting that a ThreadRun was halted manually, via the `rpc StopWfRun` request.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"meaning_of_life","description":"Nothing to store.","label":"","type":"bool","longType":"bool","fullType":"bool","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `ParentHalted`
<ProtoMessage key={4} message={{"name":"ParentHalted","longName":"ParentHalted","fullName":"littlehorse.ParentHalted","description":"A Halt Reason denoting that a ThreadRun is halted because its parent is also HALTED.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"parent_thread_id","description":"The ID of the halted parent.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `PendingFailureHandler`
<ProtoMessage key={5} message={{"name":"PendingFailureHandler","longName":"PendingFailureHandler","fullName":"littlehorse.PendingFailureHandler","description":"Represents a Failure Handler that is pending to be run.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"failed_thread_run","description":"The ThreadRun that failed.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"handler_spec_name","description":"The name of the ThreadSpec to run to handle the failure.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `PendingFailureHandlerHaltReason`
<ProtoMessage key={6} message={{"name":"PendingFailureHandlerHaltReason","longName":"PendingFailureHandlerHaltReason","fullName":"littlehorse.PendingFailureHandlerHaltReason","description":"A Halt Reason denoting that a ThreadRun is halted while a Failure Handler is *enqueued* to be\nrun.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"node_run_position","description":"The position of the NodeRun which threw the failure.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `PendingInterrupt`
<ProtoMessage key={7} message={{"name":"PendingInterrupt","longName":"PendingInterrupt","fullName":"littlehorse.PendingInterrupt","description":"Represents an ExternalEvent that has a registered Interrupt Handler for it\nand which is pending to be sent to the relevant ThreadRun's.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"external_event_id","description":"The ID of the ExternalEvent triggering the Interrupt.","label":"","type":"ExternalEventId","longType":"ExternalEventId","fullType":"littlehorse.ExternalEventId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#externaleventid"},{"name":"handler_spec_name","description":"The name of the ThreadSpec to run to handle the Interrupt.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"interrupted_thread_id","description":"The ID of the ThreadRun to interrupt. Must wait for this ThreadRun to be\nHALTED before running the Interrupt Handler.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `PendingInterruptHaltReason`
<ProtoMessage key={8} message={{"name":"PendingInterruptHaltReason","longName":"PendingInterruptHaltReason","fullName":"littlehorse.PendingInterruptHaltReason","description":"A Halt Reason denoting that a ThreadRun is halted while waiting for an Interrupt handler\nto be run.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"external_event_id","description":"The ExternalEventId that caused the Interrupt.","label":"","type":"ExternalEventId","longType":"ExternalEventId","fullType":"littlehorse.ExternalEventId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#externaleventid"}]}} />


### `ThreadHaltReason`
<ProtoMessage key={9} message={{"name":"ThreadHaltReason","longName":"ThreadHaltReason","fullName":"littlehorse.ThreadHaltReason","description":"Denotes a reason why a ThreadRun is halted. See `ThreadRun.halt_reasons` for context.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"parent_halted","description":"Parent threadRun halted.","label":"","type":"ParentHalted","longType":"ParentHalted","fullType":"littlehorse.ParentHalted","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#parenthalted"},{"name":"interrupted","description":"Handling an Interrupt.","label":"","type":"Interrupted","longType":"Interrupted","fullType":"littlehorse.Interrupted","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#interrupted"},{"name":"pending_interrupt","description":"Waiting to handle Interrupt.","label":"","type":"PendingInterruptHaltReason","longType":"PendingInterruptHaltReason","fullType":"littlehorse.PendingInterruptHaltReason","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#pendinginterrupthaltreason"},{"name":"pending_failure","description":"Waiting to handle a failure.","label":"","type":"PendingFailureHandlerHaltReason","longType":"PendingFailureHandlerHaltReason","fullType":"littlehorse.PendingFailureHandlerHaltReason","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#pendingfailurehandlerhaltreason"},{"name":"handling_failure","description":"Handling a failure.","label":"","type":"HandlingFailureHaltReason","longType":"HandlingFailureHaltReason","fullType":"littlehorse.HandlingFailureHaltReason","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#handlingfailurehaltreason"},{"name":"manual_halt","description":"Manually stopped the WfRun.","label":"","type":"ManualHalt","longType":"ManualHalt","fullType":"littlehorse.ManualHalt","ismap":false,"isoneof":true,"oneofdecl":"reason","defaultValue":"","typeLink":"/protodocs/wf_run.proto#manualhalt"}]}} />


### `ThreadRun`
<ProtoMessage key={10} message={{"name":"ThreadRun","longName":"ThreadRun","fullName":"littlehorse.ThreadRun","description":"A ThreadRun is a running thread of execution within a WfRun.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"wf_spec_id","description":"The current WfSpecId of this ThreadRun. This must be set explicitly because\nduring a WfSpec Version Migration, it is possible for different ThreadSpec's to\nhave different WfSpec versions.","label":"","type":"WfSpecId","longType":"WfSpecId","fullType":"littlehorse.WfSpecId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#wfspecid"},{"name":"number","description":"The number of the ThreadRun. This is an auto-incremented integer corresponding to\nthe chronological ordering of when the ThreadRun's were created. If you have not\nconfigured any retention policy for the ThreadRun's (i.e. never clean them up), then\nthis also corresponds to the position of the ThreadRun in the WfRun's `thread_runs`\nlist.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"status","description":"The status of the ThreadRun.","label":"","type":"LHStatus","longType":"LHStatus","fullType":"littlehorse.LHStatus","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_enums.proto#lhstatus"},{"name":"thread_spec_name","description":"The name of the ThreadSpec being run.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"start_time","description":"The time the ThreadRun was started.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"end_time","description":"The time the ThreadRun was completed or failed. Unset if still active.","label":"optional","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":true,"oneofdecl":"_end_time","defaultValue":""},{"name":"error_message","description":"Human-readable error message detailing what went wrong in the case of a failure.","label":"optional","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":true,"oneofdecl":"_error_message","defaultValue":""},{"name":"child_thread_ids","description":"List of thread_run_number's for all child thread_runs.","label":"repeated","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"parent_thread_id","description":"Set for every ThreadRun except the ENTRYPOINT. This is the id of the parent thread.","label":"optional","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":true,"oneofdecl":"_parent_thread_id","defaultValue":""},{"name":"halt_reasons","description":"If the ThreadRun is HALTED, this contains a list of every reason for which the\nThreadRun is HALTED. Once every reason is \"resolved\" (and thus removed from the list),\nthen the ThreadRun will return to the RUNNING state.","label":"repeated","type":"ThreadHaltReason","longType":"ThreadHaltReason","fullType":"littlehorse.ThreadHaltReason","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/wf_run.proto#threadhaltreason"},{"name":"interrupt_trigger_id","description":"If this ThreadRun is of type INTERRUPT_HANDLER, this field is set to the ID of the\nExternalEvent that caused the Interrupt.","label":"optional","type":"ExternalEventId","longType":"ExternalEventId","fullType":"littlehorse.ExternalEventId","ismap":false,"isoneof":true,"oneofdecl":"_interrupt_trigger_id","defaultValue":"","typeLink":"/protodocs/object_id.proto#externaleventid"},{"name":"failure_being_handled","description":"If this ThreadRun is of type FAILURE_HANDLER, this field is set to the exact Failure\nthat is being handled by this ThreadRun.","label":"optional","type":"FailureBeingHandled","longType":"FailureBeingHandled","fullType":"littlehorse.FailureBeingHandled","ismap":false,"isoneof":true,"oneofdecl":"_failure_being_handled","defaultValue":"","typeLink":"/protodocs/wf_run.proto#failurebeinghandled"},{"name":"current_node_position","description":"This is the current `position` of the current NodeRun being run. This is an\nauto-incremented field that gets incremented every time we run a new NodeRun.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"handled_failed_children","description":"List of every child ThreadRun which both a) failed, and b) was properly handled by a\nFailure Handler.\n\nThis is important because at the EXIT node, if a Child ThreadRun was discovered to have\nfailed, then this ThreadRun (the parent) also fails with the same failure as the child.\nIf, however, a Failure Handler had previously \"handled\" the Child Failure, that ThreadRun's\nnumber is appended to this list, and then the EXIT node ignores that ThreadRun.","label":"repeated","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"type","description":"The Type of this ThreadRun.","label":"","type":"ThreadType","longType":"ThreadType","fullType":"littlehorse.ThreadType","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/wf_run.proto#threadtype"}]}} />


### `WfRun`
<ProtoMessage key={11} message={{"name":"WfRun","longName":"WfRun","fullName":"littlehorse.WfRun","description":"A WfRun is a running instance of a WfSpec.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"id","description":"The ID of the WfRun.","label":"","type":"WfRunId","longType":"WfRunId","fullType":"littlehorse.WfRunId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#wfrunid"},{"name":"wf_spec_id","description":"The ID of the WfSpec that this WfRun belongs to.","label":"","type":"WfSpecId","longType":"WfSpecId","fullType":"littlehorse.WfSpecId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#wfspecid"},{"name":"old_wf_spec_versions","description":"When a WfRun is migrated from an old verison of a WfSpec to a newer one, we add the\nold WfSpecId to this list for historical auditing and debugging purposes.","label":"repeated","type":"WfSpecId","longType":"WfSpecId","fullType":"littlehorse.WfSpecId","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/object_id.proto#wfspecid"},{"name":"status","description":"The status of this WfRun.","label":"","type":"LHStatus","longType":"LHStatus","fullType":"littlehorse.LHStatus","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_enums.proto#lhstatus"},{"name":"greatest_threadrun_number","description":"The ID number of the greatest ThreadRUn in this WfRun. The total number of ThreadRuns\nis given by greatest_thread_run_number + 1.\n\nIntroduced now since with ThreadRun-level retention, we can't rely upon\nthread_runs.size() to determine the number of ThreadRuns, as a ThreadRun is removed\nfrom the thread_runs list once its retention period expires.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"start_time","description":"The time the WfRun was started.","label":"","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"end_time","description":"The time the WfRun failed or completed.","label":"optional","type":"Timestamp","longType":"google.protobuf.Timestamp","fullType":"google.protobuf.Timestamp","ismap":false,"isoneof":true,"oneofdecl":"_end_time","defaultValue":""},{"name":"thread_runs","description":"A list of all active ThreadRun's and terminated ThreadRun's whose retention periods\nhave not yet expired.","label":"repeated","type":"ThreadRun","longType":"ThreadRun","fullType":"littlehorse.ThreadRun","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/wf_run.proto#threadrun"},{"name":"pending_interrupts","description":"A list of Interrupt events that will fire once their appropriate ThreadRun's finish\nhalting.","label":"repeated","type":"PendingInterrupt","longType":"PendingInterrupt","fullType":"littlehorse.PendingInterrupt","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/wf_run.proto#pendinginterrupt"},{"name":"pending_failures","description":"A list of pending failure handlers which will fire once their appropriate ThreadRun's\nfinish halting.","label":"repeated","type":"PendingFailureHandler","longType":"PendingFailureHandler","fullType":"littlehorse.PendingFailureHandler","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/wf_run.proto#pendingfailurehandler"}]}} />

---
## Enums


### `ThreadType`
<ProtoEnum key={0} enumb={{"name":"ThreadType","longName":"ThreadType","fullName":"littlehorse.ThreadType","description":"The type of a ThreadRUn.","values":[{"name":"ENTRYPOINT","number":"0","description":"The ENTRYPOINT ThreadRun. Exactly one per WfRun. Always has number == 0."},{"name":"CHILD","number":"1","description":"A ThreadRun explicitly created by another ThreadRun via a START_THREAD or START_MULTIPLE_THREADS\nNodeRun."},{"name":"INTERRUPT","number":"2","description":"A ThreadRun that was created to handle an Interrupt."},{"name":"FAILURE_HANDLER","number":"3","description":"A ThreadRun that was created to handle a Failure."}]}} />

---


  