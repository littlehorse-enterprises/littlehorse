---
title: common_wfspec.proto
hide_title: true
---

import { ProtoMessage, ProtoServiceMethod, ProtoEnum } from '@theme/ProtoFile';

# `common_wfspec.proto`
_**path** common_wfspec.proto_

_**package** littlehorse_



---

## Messages


### `ExponentialBackoffRetryPolicy`
<ProtoMessage key={0} message={{"name":"ExponentialBackoffRetryPolicy","longName":"ExponentialBackoffRetryPolicy","fullName":"littlehorse.ExponentialBackoffRetryPolicy","description":"Defines an Exponential backoff policy for TaskRun retries. The delay for a retry\nattempt `N` is defined as:\n\nmin(base_interval_ms * (multiplier ^(N-1)), max_delay_ms)\n\nNote that timers in LittleHorse have a resolution of about 500-1000 milliseconds,\nso timing is not exact.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"base_interval_ms","description":"Base delay in ms for the first retry. Note that in LittleHorse, timers have a\nresolution of 500-1000 milliseconds. Must be greater than zero.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"max_delay_ms","description":"Maximum delay in milliseconds between retries.","label":"","type":"int64","longType":"int64","fullType":"int64","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"multiplier","description":"The multiplier to use in calculating the retry backoff policy. We recommend\nstarting with 2.0. Must be at least 1.0.","label":"","type":"float","longType":"float","fullType":"float","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""}]}} />


### `TaskNode`
<ProtoMessage key={1} message={{"name":"TaskNode","longName":"TaskNode","fullName":"littlehorse.TaskNode","description":"Defines a TaskRun execution. Used in a Node and also in the UserTask Trigger Actions.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"task_def_id","description":"","label":"","type":"TaskDefId","longType":"TaskDefId","fullType":"littlehorse.TaskDefId","ismap":false,"isoneof":true,"oneofdecl":"task_to_execute","defaultValue":"","typeLink":"/protodocs/object_id.proto#taskdefid"},{"name":"dynamic_task","description":"","label":"","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":true,"oneofdecl":"task_to_execute","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"},{"name":"timeout_seconds","description":"How long until LittleHorse determines that the Task Worker had a technical ERROR if\nthe worker does not yet reply to the Server. This is determined on a per-Attempt\nbasis.","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"retries","description":"Configures the amount of retries allowed on this TaskNode.\n\nRetryable errors include:\n- TASK_TIMEOUT: the TaskRun was started but the scheduler didn't hear back from the\n  Task Worker in time.\n- TASK_FAILED: the Task Worker reported an unexpected *technical* ERROR when executing\n  the Task Function.\n\nOther result codes are not retryable (including TASK_OUTPUT_SERIALIZING_ERROR,\nTASK_INPUT_VAR_SUB_ERROR, and TASK_EXCEPTION).","label":"","type":"int32","longType":"int32","fullType":"int32","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"exponential_backoff","description":"If this field is set, then retries will use Exponential Backoff.","label":"optional","type":"ExponentialBackoffRetryPolicy","longType":"ExponentialBackoffRetryPolicy","fullType":"littlehorse.ExponentialBackoffRetryPolicy","ismap":false,"isoneof":true,"oneofdecl":"_exponential_backoff","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#exponentialbackoffretrypolicy"},{"name":"variables","description":"Input variables into the TaskDef.","label":"repeated","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"}]}} />


### `UTActionTrigger`
<ProtoMessage key={2} message={{"name":"UTActionTrigger","longName":"UTActionTrigger","fullName":"littlehorse.UTActionTrigger","description":"A UTActionTrigger triggers an action upon certain lifecycle hooks\nin a User Task. Actions include:\n- re-assign the User Task Run\n- cancel the User Task Run\n- execute a Reminder Task\n\nHooks include:\n- Upon creation of the UserTaskRun\n- Upon rescheduling the UserTaskRun","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"task","description":"","label":"","type":"UTATask","longType":"UTActionTrigger.UTATask","fullType":"littlehorse.UTActionTrigger.UTATask","ismap":false,"isoneof":true,"oneofdecl":"action","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#utactiontriggerutatask"},{"name":"cancel","description":"","label":"","type":"UTACancel","longType":"UTActionTrigger.UTACancel","fullType":"littlehorse.UTActionTrigger.UTACancel","ismap":false,"isoneof":true,"oneofdecl":"action","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#utactiontriggerutacancel"},{"name":"reassign","description":"later on, might enable scheduling entire ThreadRuns","label":"","type":"UTAReassign","longType":"UTActionTrigger.UTAReassign","fullType":"littlehorse.UTActionTrigger.UTAReassign","ismap":false,"isoneof":true,"oneofdecl":"action","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#utactiontriggerutareassign"},{"name":"delay_seconds","description":"The Action is triggered some time after the Hook matures. The delay is controlled\nby this field.","label":"","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"},{"name":"hook","description":"The hook on which this UserTaskAction is scheduled.","label":"","type":"UTHook","longType":"UTActionTrigger.UTHook","fullType":"littlehorse.UTActionTrigger.UTHook","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#utactiontriggeruthook"}]}} />


### `UTActionTrigger.UTACancel`
<ProtoMessage key={3} message={{"name":"UTACancel","longName":"UTActionTrigger.UTACancel","fullName":"littlehorse.UTActionTrigger.UTACancel","description":"A UserTaskAction that causes a UserTaskRun to be CANCELLED when it fires.","hasExtensions":false,"hasFields":false,"hasOneofs":false,"extensions":[],"fields":[]}} />


### `UTActionTrigger.UTAReassign`
<ProtoMessage key={4} message={{"name":"UTAReassign","longName":"UTActionTrigger.UTAReassign","fullName":"littlehorse.UTActionTrigger.UTAReassign","description":"A UserTaskAction that causes a UserTaskRun to be reassigned when it fires.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"user_id","description":"A variable assignment that resolves to a STR representing the new user_id. If\nnot set, the user_id of the UserTaskRun will be un-set.","label":"optional","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":true,"oneofdecl":"_user_id","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"},{"name":"user_group","description":"A variable assignment that resolves to a STR representing the new user_group. If\nnot set, the user_group of the UserTaskRun will be un-set.","label":"optional","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":true,"oneofdecl":"_user_group","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"}]}} />


### `UTActionTrigger.UTATask`
<ProtoMessage key={5} message={{"name":"UTATask","longName":"UTActionTrigger.UTATask","fullName":"littlehorse.UTActionTrigger.UTATask","description":"A UserTaskAction that causes a TaskRun to be scheduled when it fires.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"task","description":"The specification of the Task to schedule.","label":"","type":"TaskNode","longType":"TaskNode","fullType":"littlehorse.TaskNode","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#tasknode"},{"name":"mutations","description":"EXPERIMENTAL: Any variables in the ThreadRun which we should mutate.","label":"repeated","type":"VariableMutation","longType":"VariableMutation","fullType":"littlehorse.VariableMutation","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variablemutation"}]}} />


### `VariableAssignment`
<ProtoMessage key={6} message={{"name":"VariableAssignment","longName":"VariableAssignment","fullName":"littlehorse.VariableAssignment","description":"A VariableAssignment is used within a WfSpec to determine how a value should be\nassigned in the context of a specific WfRun. For example, in a TASK node, you\nuse a VariableAssignment for each input parameter to determine how the value\nis set.\n\nNote that the VariableAssignment is normally handled by the SDK; you shouldn't\nhave to worry about this in daily LittleHorse usage.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"json_path","description":"If you provide a `variable_name` and the specified variable is JSON_OBJ or\nJSON_ARR type, then you may also provide a json_path which makes the VariableAssignment\nresolve to the specified field.","label":"optional","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":true,"oneofdecl":"_json_path","defaultValue":""},{"name":"variable_name","description":"Assign the value from a variable.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":true,"oneofdecl":"source","defaultValue":""},{"name":"literal_value","description":"Assign a literal value","label":"","type":"VariableValue","longType":"VariableValue","fullType":"littlehorse.VariableValue","ismap":false,"isoneof":true,"oneofdecl":"source","defaultValue":"","typeLink":"/protodocs/variable.proto#variablevalue"},{"name":"format_string","description":"Assign a format string","label":"","type":"FormatString","longType":"VariableAssignment.FormatString","fullType":"littlehorse.VariableAssignment.FormatString","ismap":false,"isoneof":true,"oneofdecl":"source","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignmentformatstring"}]}} />


### `VariableAssignment.FormatString`
<ProtoMessage key={7} message={{"name":"FormatString","longName":"VariableAssignment.FormatString","fullName":"littlehorse.VariableAssignment.FormatString","description":"A FormatString formats a template String with values from the WfRun.","hasExtensions":false,"hasFields":true,"hasOneofs":false,"extensions":[],"fields":[{"name":"format","description":"A VariableAssignment which must resolve to a String that has format args.\nA valid string is \"This is a format string with three args: {0}, {1}, {2}\"","label":"","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"},{"name":"args","description":"VariableAssignments which fill out the args.","label":"repeated","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"}]}} />


### `VariableDef`
<ProtoMessage key={8} message={{"name":"VariableDef","longName":"VariableDef","fullName":"littlehorse.VariableDef","description":"Declares a Variable.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"type","description":"The Type of the variable.","label":"","type":"VariableType","longType":"VariableType","fullType":"littlehorse.VariableType","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_enums.proto#variabletype"},{"name":"name","description":"The name of the variable.","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"default_value","description":"Optional default value if the variable isn't set; for example, in a ThreadRun\nif you start a ThreadRun or WfRun without passing a variable in, then this is\nused.","label":"optional","type":"VariableValue","longType":"VariableValue","fullType":"littlehorse.VariableValue","ismap":false,"isoneof":true,"oneofdecl":"_default_value","defaultValue":"","typeLink":"/protodocs/variable.proto#variablevalue"}]}} />


### `VariableMutation`
<ProtoMessage key={9} message={{"name":"VariableMutation","longName":"VariableMutation","fullName":"littlehorse.VariableMutation","description":"A VariableMutation defines a modification made to one of a ThreadRun's variables.\nThe LHS determines the variable that is modified; the operation determines how\nit is modified, and the RHS is the input to the operation.\n\nDay-to-day users of LittleHorse generally don't interact with this structure unless\nthey are writing their own WfSpec SDK.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"lhs_name","description":"The name of the variable to mutate","label":"","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":""},{"name":"lhs_json_path","description":"For JSON_ARR and JSON_OBJ variables, this allows you to optionally mutate\na specific sub-field of the variable.","label":"optional","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":true,"oneofdecl":"_lhs_json_path","defaultValue":""},{"name":"operation","description":"Defines the operation that we are executing.","label":"","type":"VariableMutationType","longType":"VariableMutationType","fullType":"littlehorse.VariableMutationType","ismap":false,"isoneof":false,"oneofdecl":"","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variablemutationtype"},{"name":"source_variable","description":"Set the source_variable as the RHS to use another variable from the workflow to\nas the RHS/","label":"","type":"VariableAssignment","longType":"VariableAssignment","fullType":"littlehorse.VariableAssignment","ismap":false,"isoneof":true,"oneofdecl":"rhs_value","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variableassignment"},{"name":"literal_value","description":"Use a literal value as the RHS.","label":"","type":"VariableValue","longType":"VariableValue","fullType":"littlehorse.VariableValue","ismap":false,"isoneof":true,"oneofdecl":"rhs_value","defaultValue":"","typeLink":"/protodocs/variable.proto#variablevalue"},{"name":"node_output","description":"Use the output of the current node as the RHS.","label":"","type":"NodeOutputSource","longType":"VariableMutation.NodeOutputSource","fullType":"littlehorse.VariableMutation.NodeOutputSource","ismap":false,"isoneof":true,"oneofdecl":"rhs_value","defaultValue":"","typeLink":"/protodocs/common_wfspec.proto#variablemutationnodeoutputsource"}]}} />


### `VariableMutation.NodeOutputSource`
<ProtoMessage key={10} message={{"name":"NodeOutputSource","longName":"VariableMutation.NodeOutputSource","fullName":"littlehorse.VariableMutation.NodeOutputSource","description":"Specifies to use the output of a NodeRun as the RHS.","hasExtensions":false,"hasFields":true,"hasOneofs":true,"extensions":[],"fields":[{"name":"jsonpath","description":"Use this specific field from a JSON output","label":"optional","type":"string","longType":"string","fullType":"string","ismap":false,"isoneof":true,"oneofdecl":"_jsonpath","defaultValue":""}]}} />

---
## Enums


### `Comparator`
<ProtoEnum key={0} enumb={{"name":"Comparator","longName":"Comparator","fullName":"littlehorse.Comparator","description":"Operator for comparing two values to create a boolean expression.","values":[{"name":"LESS_THAN","number":"0","description":"Equivalent to `<`. Only valid for primitive types (no JSON_OBJ or JSON_ARR)."},{"name":"GREATER_THAN","number":"1","description":"Equivalent to `>`. Only valid for primitive types (no JSON_OBJ or JSON_ARR)."},{"name":"LESS_THAN_EQ","number":"2","description":"Equivalent to `<=`. Only valid for primitive types (no JSON_OBJ or JSON_ARR)."},{"name":"GREATER_THAN_EQ","number":"3","description":"Equivalent to `>=`. Only valid for primitive types (no JSON_OBJ or JSON_ARR)."},{"name":"EQUALS","number":"4","description":"This is valid for any variable type, and is similar to .equals() in Java.\n\nOne note: if the RHS is a different type from the LHS, then LittleHorse will\ntry to cast the RHS to the same type as the LHS. If the cast fails, then the\nThreadRun fails with a VAR_SUB_ERROR."},{"name":"NOT_EQUALS","number":"5","description":"This is the inverse of `EQUALS`"},{"name":"IN","number":"6","description":"Only valid if the RHS is a JSON_OBJ or JSON_ARR. Valid for any type on the LHS.\n\nFor the JSON_OBJ type, this returns true if the LHS is equal to a *KEY* in the\nRHS. For the JSON_ARR type, it returns true if one of the elements of the RHS\nis equal to the LHS."},{"name":"NOT_IN","number":"7","description":"The inverse of IN."}]}} />


### `UTActionTrigger.UTHook`
<ProtoEnum key={1} enumb={{"name":"UTHook","longName":"UTActionTrigger.UTHook","fullName":"littlehorse.UTActionTrigger.UTHook","description":"Enumerates the different lifecycle hooks that can cause the timer to start running.","values":[{"name":"ON_ARRIVAL","number":"0","description":"The hook should be scheduled `delay_seconds` after the UserTaskRun is created. This\nhook only causes the action to be scheduled once."},{"name":"ON_TASK_ASSIGNED","number":"1","description":"The hook should be scheduled `delay_seconds` after the ownership of the UserTaskRun\nchanges. This hook causes the Action to be scheduled one or more times. The first\ntime is scheduled when the UserTaskRun is created, since we treat the change from\n\"UserTaskRun is nonexistent\" to \"UserTaskRun is owned by a userId or userGroup\" as\na change in ownership."}]}} />


### `VariableMutationType`
<ProtoEnum key={2} enumb={{"name":"VariableMutationType","longName":"VariableMutationType","fullName":"littlehorse.VariableMutationType","description":"Enumerates the available operations to mutate a variable in a WfRun.","values":[{"name":"ASSIGN","number":"0","description":"Set the variable specified by the LHS to the value of the RHS."},{"name":"ADD","number":"1","description":"Add the RHS to the LHS."},{"name":"EXTEND","number":"2","description":"Append the RHS to the LHS (valid if the LHS is a STR or JSON_ARR)"},{"name":"SUBTRACT","number":"3","description":"Subtract the RHS from the LHS (both must be INT or DOUBLE)"},{"name":"MULTIPLY","number":"4","description":"Multiply the LHS by the RHS (both must be INT or DOUBLE)"},{"name":"DIVIDE","number":"5","description":"Divide the LHS by the RHS (both must be INT or DOUBLE)"},{"name":"REMOVE_IF_PRESENT","number":"6","description":"Remove any occurrences of RHS from LHS (LHS must be JSON_ARR)"},{"name":"REMOVE_INDEX","number":"7","description":"Remove item at index RHS from LHS (LHS must be JSON_ARR)"},{"name":"REMOVE_KEY","number":"8","description":"Remove the key specified by RHS from the LHS (LHS must be JSON_OBJ)"}]}} />

---


  