# LittleHorse API Reference

The LittleHorse Server exposes a GRPC API to its clients. For most general usage of LittleHorse, you _will not_ need to
read the raw protobuf schema. Common LittleHorse client actions fall into three general categories:

1. Developing a Task Worker, which is handled by our [Task Worker SDK's](/docs/developer-guide/task-worker-development).
2. Developing a WfSpec, which is handled by our [`WfSpec` SDK's](/docs/developer-guide/wfspec-development).
3. Running and interacting with `WfRun`'s, which is documented in our ["Using the API"](/docs/developer-guide/grpc) docs.

However, the highly curious reader might want to see the actual GRPC and Protobuf specification. The docs on this page
are autogenerated from our actual [protobuf files](https://github.com/littlehorse-enterprises/littlehorse/tree/master/schemas).

The documentation of what the specific protobuf fields mean is potentially useful for advanced Jedi Master use-cases.

Happy Reading!

## LittleHorse GRPC API

The LittleHorse GRPC API is the backbone of the clients that you get in all of our SDK's. Every `LHConfig` object
gives you a GRPC stub to access the API. Most common operations are already documented with code examples in different
languages [here](/docs/developer-guide/grpc), but we put this here for the true Jedi Masters.

| Name | Request Type | Response Type | Description |
| -----| ------------ | ------------- | ------------|
| `PutTaskDef` | [`PutTaskDefRequest`](#puttaskdefrequest) | [`TaskDef`](#taskdef) | Creates a TaskDef. |
| `GetTaskDef` | [`TaskDefId`](#taskdefid) | [`TaskDef`](#taskdef) | Gets a TaskDef. |
| `PutExternalEventDef` | [`PutExternalEventDefRequest`](#putexternaleventdefrequest) | [`ExternalEventDef`](#externaleventdef) | Creates an ExternalEventDef. |
| `GetExternalEventDef` | [`ExternalEventDefId`](#externaleventdefid) | [`ExternalEventDef`](#externaleventdef) | Gets an ExternalEventDef. |
| `PutWorkflowEventDef` | [`PutWorkflowEventDefRequest`](#putworkfloweventdefrequest) | [`WorkflowEventDef`](#workfloweventdef) | EXPERIMENTAL: Creates a WorkflowEventDef. |
| `PutWfSpec` | [`PutWfSpecRequest`](#putwfspecrequest) | [`WfSpec`](#wfspec) | Creates a WfSpec. |
| `GetWfSpec` | [`WfSpecId`](#wfspecid) | [`WfSpec`](#wfspec) | Gets a WfSpec. |
| `GetLatestWfSpec` | [`GetLatestWfSpecRequest`](#getlatestwfspecrequest) | [`WfSpec`](#wfspec) | Returns the latest WfSpec with a specified name (and optionally a specified Major Version). |
| `MigrateWfSpec` | [`MigrateWfSpecRequest`](#migratewfspecrequest) | [`WfSpec`](#wfspec) | EXPERIMENTAL: Migrates all WfRun's from one version of a WfSpec onto a newer version of the same WfSpec. This is useful for long-running WfRun's (eg. a 60-day marketing campaign) where you must update WfRun's that are in the RUNNING state rather than allowing them to run to completion.  As of 0.7.2, this feature is only partially implemented. |
| `PutUserTaskDef` | [`PutUserTaskDefRequest`](#putusertaskdefrequest) | [`UserTaskDef`](#usertaskdef) | Creates a UserTaskDef. |
| `GetUserTaskDef` | [`UserTaskDefId`](#usertaskdefid) | [`UserTaskDef`](#usertaskdef) | Gets a specific UserTaskDef.  This RPC is highly useful for applications built around User Tasks. For example, a UI that dynamically displays form fields based on the User Task might first receive a UserTaskRun, then use that UserTaskRun to look up the UserTaskDef. The frontend would inspect the UserTaskDef and display a form field on the browser page for each field in the UserTaskDef. |
| `GetLatestUserTaskDef` | [`GetLatestUserTaskDefRequest`](#getlatestusertaskdefrequest) | [`UserTaskDef`](#usertaskdef) | Returns the most recent UserTaskDef with a specific name. |
| `RunWf` | [`RunWfRequest`](#runwfrequest) | [`WfRun`](#wfrun) | Runs a WfSpec to create a WfRun. |
| `GetWfRun` | [`WfRunId`](#wfrunid) | [`WfRun`](#wfrun) | Gets a WfRun. Although useful for development and debugging, this RPC is not often used by applications. |
| `GetUserTaskRun` | [`UserTaskRunId`](#usertaskrunid) | [`UserTaskRun`](#usertaskrun) | Loads a specific UserTaskRun. It includes information about to whom the UserTask is currently assigned, history of assignments and reassignments, and any context for that UserTaskRun which is specific to the WfRun. |
| `AssignUserTaskRun` | [`AssignUserTaskRunRequest`](#assignusertaskrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Change the ownership of a UserTaskRun to a new userId, userGroup, or both. The action will be reflected in your next call to SearchUserTaskRun. This RPC is useful for applications that are using User Tasks to build an internal task-list and wish to administer the tasks. |
| `CompleteUserTaskRun` | [`CompleteUserTaskRunRequest`](#completeusertaskrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Completes a UserTaskRun. Includes the results of the UserTaskRun, the UserTaskRun Id, and the userId of the user who completes the UserTaskRun. Results in the UserTask NodeRun being completed, and unblocks the associated ThreadRun in the WfRun.  This RPC is highly useful for applications built around a WfSpec that uses USER_TASK nodes. |
| `CancelUserTaskRun` | [`CancelUserTaskRunRequest`](#cancelusertaskrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Cancels a UserTaskRun. This will result in an EXCEPTION being propagated to the WfRun. |
| `ListUserTaskRuns` | [`ListUserTaskRunRequest`](#listusertaskrunrequest) | [`UserTaskRunList`](#usertaskrunlist) | Lists all UserTaskRun's for a specific WfRun. Can be useful when using a WfRun to model an entity. |
| `GetNodeRun` | [`NodeRunId`](#noderunid) | [`NodeRun`](#noderun) | Gets a specific NodeRun. |
| `ListNodeRuns` | [`ListNodeRunsRequest`](#listnoderunsrequest) | [`NodeRunList`](#noderunlist) | Lists all NodeRun's for a specific WfRun. |
| `GetTaskRun` | [`TaskRunId`](#taskrunid) | [`TaskRun`](#taskrun) | Gets a specific TaskRun. |
| `ListTaskRuns` | [`ListTaskRunsRequest`](#listtaskrunsrequest) | [`TaskRunList`](#taskrunlist) | Lists all TaskRun's for a specific WfRun. |
| `GetVariable` | [`VariableId`](#variableid) | [`Variable`](#variable) | Get the value of a specific Variable. When using a WfRun to model an entity, this RPC is useful for retrieving information. It is equivalent to looking up the value of a column for a specific row in a SQL table. |
| `ListVariables` | [`ListVariablesRequest`](#listvariablesrequest) | [`VariableList`](#variablelist) | List all Variables from a WfRun. |
| `PutExternalEvent` | [`PutExternalEventRequest`](#putexternaleventrequest) | [`ExternalEvent`](#externalevent) | Post an ExternalEvent. This RPC is highly useful for |
| `GetExternalEvent` | [`ExternalEventId`](#externaleventid) | [`ExternalEvent`](#externalevent) | Get a specific ExternalEvent. |
| `AwaitWorkflowEvent` | [`AwaitWorkflowEventRequest`](#awaitworkfloweventrequest) | [`WorkflowEvent`](#workflowevent) | Waits for a WorkflowEvent to be thrown by a given WfRun. Returns immediately if a matching WorkflowEvent has already been thrown; throws a DEADLINE_EXCEEDED error if the WorkflowEvent is not thrown before the deadline specified by the client.  To specify the deadline, the client should use GRPC deadlines. |
| `ListExternalEvents` | [`ListExternalEventsRequest`](#listexternaleventsrequest) | [`ExternalEventList`](#externaleventlist) | List ExternalEvent's for a specific WfRun. |
| `SearchWfRun` | [`SearchWfRunRequest`](#searchwfrunrequest) | [`WfRunIdList`](#wfrunidlist) | Search for WfRun's. This RPC is highly useful for applications that store data in LittleHorse and need to find a specific WfRun based on certain indexed fields. |
| `SearchNodeRun` | [`SearchNodeRunRequest`](#searchnoderunrequest) | [`NodeRunIdList`](#noderunidlist) | Search for NodeRun's. This RPC is useful for monitoring and finding bugs in your workflows or Task Workers. |
| `SearchTaskRun` | [`SearchTaskRunRequest`](#searchtaskrunrequest) | [`TaskRunIdList`](#taskrunidlist) | Search for TaskRun's. This RPC is useful for finding bugs in your Task Workers. |
| `SearchUserTaskRun` | [`SearchUserTaskRunRequest`](#searchusertaskrunrequest) | [`UserTaskRunIdList`](#usertaskrunidlist) | Search for UserTaskRun's. This RPC is highly useful for applications that connect human end-users to LittleHorse: it enables you to find all tasks assigned to a specific person or group of people. |
| `SearchVariable` | [`SearchVariableRequest`](#searchvariablerequest) | [`VariableIdList`](#variableidlist) | Search for Variable's. This RPC is highly useful for applications that store data in LittleHorse and need to find a specific WfRun based on certain indexed fields. |
| `SearchExternalEvent` | [`SearchExternalEventRequest`](#searchexternaleventrequest) | [`ExternalEventIdList`](#externaleventidlist) | Search for ExternalEvent's. |
| `SearchTaskDef` | [`SearchTaskDefRequest`](#searchtaskdefrequest) | [`TaskDefIdList`](#taskdefidlist) | Search for TaskDef's. |
| `SearchUserTaskDef` | [`SearchUserTaskDefRequest`](#searchusertaskdefrequest) | [`UserTaskDefIdList`](#usertaskdefidlist) | Search for UserTaskDef's. |
| `SearchWfSpec` | [`SearchWfSpecRequest`](#searchwfspecrequest) | [`WfSpecIdList`](#wfspecidlist) | Search for WfSpec's. |
| `SearchExternalEventDef` | [`SearchExternalEventDefRequest`](#searchexternaleventdefrequest) | [`ExternalEventDefIdList`](#externaleventdefidlist) | Search for ExternalEventDef's. |
| `SearchTenant` | [`SearchTenantRequest`](#searchtenantrequest) | [`TenantIdList`](#tenantidlist) | Search for all available TenantIds for current Principal |
| `RegisterTaskWorker` | [`RegisterTaskWorkerRequest`](#registertaskworkerrequest) | [`RegisterTaskWorkerResponse`](#registertaskworkerresponse) | Used by the Task Worker to: 1. Tell the LH Server that the Task Worker has joined the Task Worker Group. 2. Receive the assignemnt of LH Server's to poll from. Generally, you won't use this request manually. |
| `PollTask` | [`PollTaskRequest`](#polltaskrequest) | [`PollTaskResponse`](#polltaskresponse) | Used by Task Workers to listen for TaskRuns on the Task Queue. Generally, you won't use this RPC manually. |
| `ReportTask` | [`ReportTaskRun`](#reporttaskrun) | [`.google.protobuf.Empty`](#googleprotobufempty) | Used by Task Workers to report the result of a TaskRun. Generally, you won't use this rpc manually. |
| `StopWfRun` | [`StopWfRunRequest`](#stopwfrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Move a WfRun or a specific ThreadRun in that WfRun to the HALTED state. |
| `ResumeWfRun` | [`ResumeWfRunRequest`](#resumewfrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Resumes a WfRun or a specific ThreadRun of a WfRun. |
| `DeleteWfRun` | [`DeleteWfRunRequest`](#deletewfrunrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Deletes a WfRun. The WfRun cannot be in the RUNNING state. |
| `DeleteTaskDef` | [`DeleteTaskDefRequest`](#deletetaskdefrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Deletes a TaskDef. |
| `DeleteWfSpec` | [`DeleteWfSpecRequest`](#deletewfspecrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Deletes a WfSpec. |
| `DeleteUserTaskDef` | [`DeleteUserTaskDefRequest`](#deleteusertaskdefrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Deletes a UserTaskDef. |
| `DeleteExternalEventDef` | [`DeleteExternalEventDefRequest`](#deleteexternaleventdefrequest) | [`.google.protobuf.Empty`](#googleprotobufempty) | Deletes an ExternalEventDef. |
| `GetTaskDefMetricsWindow` | [`TaskDefMetricsQueryRequest`](#taskdefmetricsqueryrequest) | [`TaskDefMetrics`](#taskdefmetrics) | Returns TaskDef Metrics for a specific TaskDef and a specific time window. |
| `GetWfSpecMetricsWindow` | [`WfSpecMetricsQueryRequest`](#wfspecmetricsqueryrequest) | [`WfSpecMetrics`](#wfspecmetrics) | Returns WfSpec Metrics for a specific WfSpec and a specific time window. |
| `ListTaskDefMetrics` | [`ListTaskMetricsRequest`](#listtaskmetricsrequest) | [`ListTaskMetricsResponse`](#listtaskmetricsresponse) | Returns a list of TaskDef Metrics Windows. |
| `ListWfSpecMetrics` | [`ListWfMetricsRequest`](#listwfmetricsrequest) | [`ListWfMetricsResponse`](#listwfmetricsresponse) | Returns a list of WfSpec Metrics Windows. |
| `PutTenant` | [`PutTenantRequest`](#puttenantrequest) | [`Tenant`](#tenant) | EXPERIMENTAL: Creates another Tenant in the LH Server. |
| `PutPrincipal` | [`PutPrincipalRequest`](#putprincipalrequest) | [`Principal`](#principal) | EXPERIMENTAL: Creates an Principal. |
| `Whoami` | [`.google.protobuf.Empty`](#googleprotobufempty) | [`Principal`](#principal) | Returns the Principal of the caller. |
| `GetServerVersion` | [`.google.protobuf.Empty`](#googleprotobufempty) | [`ServerVersionResponse`](#serverversionresponse) | Gets the version of the LH Server. |


## LittleHorse Protobuf Schemas


